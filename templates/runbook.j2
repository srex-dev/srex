You are an SRE expert tasked with creating runbooks for service alerts. Based on the provided service information and alerts, create detailed runbooks that will help teams respond effectively to service issues.

Service Information:
- Name: {{ service_name }}
- Type: microservice
- Criticality: {{ criticality }}
- Components: {{ components | join(', ') }}

Available SLIs:
{% for sli in sli_inputs %}
- Component: {{ sli.component }}
  Type: {{ sli.sli_type }}
  Value: {{ sli.value }}
  Unit: {{ sli.unit }}
  Query: {{ sli.query }}
  Source: {{ sli.source }}
  {% if sli.metadata %}
  Metadata:
    {% if sli.metadata.business_impact %}
    Business Impact:
      - Revenue Impact: {{ sli.metadata.business_impact.revenue_impact }}
      - User Impact: {{ sli.metadata.business_impact.user_impact }}
      {% if sli.metadata.business_impact.compliance_requirements %}
      - Compliance: {{ sli.metadata.business_impact.compliance_requirements | join(', ') }}
      {% endif %}
    {% endif %}
    {% if sli.metadata.slo %}
    SLO:
      - Name: {{ sli.metadata.slo.name }}
      - Target: {{ sli.metadata.slo.target }}
      - Window: {{ sli.metadata.slo.window }}
      - Error Budget: {{ sli.metadata.slo.error_budget }}
    {% endif %}
  {% endif %}
{% if not loop.last %},{% endif %}
{% endfor %}

Requirements:
1. Create detailed runbooks for each alert that include:
   - Clear alert description
   - Initial investigation steps
   - Common causes
   - Escalation procedures
   - Recovery steps
   - Post-incident actions
2. Ensure runbooks are:
   - Clear and actionable
   - Well-structured
   - Include relevant metrics
   - Consider service dependencies
   - Include team responsibilities
3. Include:
   - Links to monitoring dashboards
   - Contact information for key teams
   - Expected response times
   - Severity levels
   - Notification channels

Please provide the runbooks in the following JSON format:
{
  "runbooks": [
    {
      "alert_name": "string",
      "description": "string",
      "severity": "string",
      "investigation_steps": [
        {
          "step": "string",
          "description": "string",
          "expected_outcome": "string"
        }
      ],
      "common_causes": ["string"],
      "escalation": {
        "levels": [
          {
            "level": "string",
            "team": "string",
            "contact": "string",
            "response_time": "string"
          }
        ],
        "procedures": ["string"]
      },
      "recovery_steps": [
        {
          "step": "string",
          "description": "string",
          "verification": "string"
        }
      ],
      "post_incident": {
        "actions": ["string"],
        "documentation": ["string"],
        "prevention": ["string"]
      },
      "metadata": {
        "service_name": "string",
        "component": "string",
        "sli_type": "string",
        "monitoring_links": ["string"],
        "dependencies": ["string"]
      }
    }
  ],
  "explanation": "string",
  "ai_model": "string",
  "temperature": number,
  "ai_confidence": number,
  "metadata": {
    "generated_at": "string",
    "service_name": "string"
  },
  "llm_suggestions": [
    {
      "metric": "string",
      "recommendation": "Provide a specific, actionable optimization or monitoring improvement for the selected metric, including concrete numbers (e.g., 'Set an alert if error rate exceeds 1% for 5 minutes', 'Increase SLO target for availability to 99.95%', or 'Trigger a page if latency > 200ms for 3 consecutive checks')."
    }
  ]
}

Additional Context:
- Service is considered critical if downtime affects business operations
- Target availability should be at least 99.9%
- Latency should be measured at the 95th percentile
- Error rate should be less than 0.1%
- Throughput should be measured in requests per second 
- Include troubleshooting commands and queries 

# Example SLOs and Alerts for all SLI types:
# SLOs:
# - Availability: Ensure availability >= 99.9% over 30d
# - Latency: 95% of requests < 200ms over 7d
# - Error: Error rate < 1% over 30d
# - Queue: Queue utilization < 90% over 7d
# - Saturation: Saturation < 85% over 7d
# - Utilization: Utilization < 80% over 7d
# - Throughput: Throughput > 80% of current value over 7d
# Alerts:
# - Availability: Alert if < 99% for 10m
# - Latency: Alert if > 200ms for 5m
# - Error: Alert if > 1% for 10m
# - Queue: Alert if > 90% for 10m
# - Saturation: Alert if > 85% for 10m
# - Utilization: Alert if > 80% for 10m
# - Throughput: Alert if < 80% of current value for 10m
#
# For each SLI type, generate a realistic, actionable SLO and alert as above. Use the SLI's name/type for references and descriptions. Set numeric targets and thresholds appropriate to the SLI type. Do not leave the 'alerts' or 'slo' arrays empty. 